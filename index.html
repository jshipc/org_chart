<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Organization Chart</title>
  <style>
    /* Use a universal box-sizing so padding/margin calculations are predictable */
    * { box-sizing: border-box; }

    /* Base body styling: system font for speed/readability, max-width for readability */
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.5;
      margin: 0;
      padding: 1rem;
      max-width: 80ch;
    }

    /* Responsive heading size */
    h1 {
      font-size: clamp(1.25rem, 2.5vw, 1.75rem);
      margin-bottom: 1rem;
    }

    /* Ordered list padding for indentation */
    ol {
      padding-left: 1.25rem;
    }

    /* Space between accordion sections */
    details {
      margin: 0.25rem 0;
    }

    /* Pointer cursor to indicate clickable summary */
    summary {
      cursor: pointer;
    }

    /* Hide the default disclosure triangle */
    
    /*
     summary::-webkit-details-marker {
    /  display: none;
    }
    */

    /* 1) Turn off the built-in marker in modern engines */
    details > summary { 
    list-style: none;            /* Chromium 119+, Firefox 118+, Safari 17+ */
    }

    /* 2) Firefox-specific marker */
    details > summary::marker { 
    content: "";                 /* Hide the disclosure triangle */
    }

    /* 3) WebKit/Blink-specific marker (Chrome, Safari, Edge) */
    details > summary::-webkit-details-marker { 
    display: none; 
    }

    /* Custom closed state icon */
    summary::before {
      content: "+ "; /* triangle pointing right */
      transition: transform .2s ease;
    }

    /* Custom open state icon */
    details[open] > summary::before {
      content: "- "; /* triangle pointing down */
    }
  </style>
</head>
<body>
  <h1>Organization Chart</h1>
  <!-- Container where the generated org chart will be placed -->
  <div id="org-chart"></div>

  <script>
  /*
    Inline JSON data representing the organization hierarchy.
    Each object can have:
      - title: string (role name)
      - subordinates: array of similar objects (optional)
  */
  const orgData = {
    "title": "Chief Executive Officer (CEO)",
    "subordinates": [
      {
        "title": "VP of Operations",
        "subordinates": [
          { "title": "Operations Manager — Region A", "subordinates": [
            { "title": "Team Lead — Warehouse" },
            { "title": "Team Lead — Logistics" },
            { "title": "Team Lead — Customer Service" }
          ]},
          { "title": "Operations Manager — Region B", "subordinates": [
            { "title": "Team Lead — Fulfillment" },
            { "title": "Team Lead — Transportation" },
            { "title": "Team Lead — Returns" }
          ]}
        ]
      },
      {
        "title": "VP of Finance",
        "subordinates": [
          { "title": "Controller", "subordinates": [
            { "title": "Senior Accountant" },
            { "title": "AP/AR Lead" },
            { "title": "Payroll Lead" }
          ]},
          { "title": "Treasury Manager", "subordinates": [
            { "title": "Analyst — Cash" },
            { "title": "Analyst — Risk" }
          ]}
        ]
      },
      {
        "title": "VP of Technology",
        "subordinates": [
          { "title": "Engineering Manager", "subordinates": [
            { "title": "Lead — Frontend" },
            { "title": "Lead — Backend" },
            { "title": "Lead — DevOps" }
          ]},
          { "title": "IT Manager", "subordinates": [
            { "title": "Systems Admin Lead" },
            { "title": "Service Desk Lead" }
          ]}
        ]
      },
      {
        "title": "VP of Sales & Marketing",
        "subordinates": [
          { "title": "Sales Manager — Enterprise", "subordinates": [
            { "title": "Account Lead — East" },
            { "title": "Account Lead — West" }
          ]},
          { "title": "Marketing Manager", "subordinates": [
            { "title": "Lead — Content" },
            { "title": "Lead — Events" },
            { "title": "Lead — Growth" }
          ]}
        ]
      }
    ]
  };

  /*
    Recursive function to create a role element.
    - If the role has subordinates: create a <details> with a <summary> and nested list.
    - If no subordinates: create a simple <span> with the title.
  */
  function createRole(role) {
    if (role.subordinates && role.subordinates.length) {
      // Create a <details> container
      const details = document.createElement('details');

      // Create the clickable summary for this role
      const summary = document.createElement('summary');
      summary.textContent = role.title;
      details.appendChild(summary);

      // Create a list for subordinates
      const list = document.createElement('ol');

      // Recursively create each subordinate entry
      role.subordinates.forEach(sub => {
        const li = document.createElement('li');
        li.appendChild(createRole(sub));
        list.appendChild(li);
      });

      // Add the list to the details
      details.appendChild(list);

      return details;
    } else {
      // No subordinates: return a text element only
      const span = document.createElement('span');
      span.textContent = role.title;
      return span;
    }
  }

  // Build the org chart and insert into the container
  document.getElementById('org-chart').appendChild(createRole(orgData));
  </script>
</body>
</html>